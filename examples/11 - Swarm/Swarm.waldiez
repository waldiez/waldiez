{
  "id": "id-4393da83-9299-4713-8318-7f826a44d26e",
  "type": "flow",
  "version": "0.6.11",
  "storageId": "wf-1749917363618dDBjyGH51ZF39JzT7zyq7",
  "name": "Swarm",
  "description": "Enhanced Swarm Orchestration with AG2. Based on <https://docs.ag2.ai/latest/docs/use-cases/notebooks/notebooks/agentchat_swarm_enhanced>",
  "tags": [
    "Swarm",
    "Group"
  ],
  "requirements": [],
  "createdAt": "2025-05-19T16:27:28.320Z",
  "updatedAt": "2025-06-14T16:54:20.577Z",
  "data": {
    "nodes": [
      {
        "id": "wt-1747672095486uUT-F0ZxOpV6OrKqTwToy",
        "type": "model",
        "position": {
          "x": 0,
          "y": 10
        },
        "measured": {
          "width": 180,
          "height": 100
        },
        "selected": false,
        "hidden": true,
        "className": ""
      },
      {
        "id": "wt-1748065085914_4KBVahVhEQ4bRrhAoqRM",
        "type": "tool",
        "position": {
          "x": 0,
          "y": 10
        },
        "measured": {
          "width": 182,
          "height": 182
        },
        "selected": false,
        "hidden": true,
        "className": ""
      },
      {
        "id": "wt-1748065131080HvikLOMWz2syY_Wms4rO4",
        "type": "tool",
        "position": {
          "x": 200,
          "y": 10
        },
        "measured": {
          "width": 182,
          "height": 182
        },
        "selected": false,
        "hidden": true,
        "className": ""
      },
      {
        "id": "wt-1748065573985IkTZBvXE6SDhmd14Ry0w_",
        "type": "tool",
        "position": {
          "x": 400,
          "y": 10
        },
        "measured": {
          "width": 182,
          "height": 182
        },
        "selected": false,
        "hidden": true,
        "className": ""
      },
      {
        "id": "wt-1748065732418WUL8_FuimG5mx0bk2_jDV",
        "type": "tool",
        "position": {
          "x": 600,
          "y": 10
        },
        "measured": {
          "width": 182,
          "height": 182
        },
        "selected": false,
        "hidden": true,
        "className": ""
      },
      {
        "id": "wa-1747672141671XNKFFNqEjBZfMyL7K_FUz",
        "type": "agent",
        "style": {
          "width": 490
        },
        "position": {
          "x": 105,
          "y": 15
        },
        "measured": {
          "width": 795,
          "height": 710
        },
        "selected": false,
        "dragging": false,
        "className": "",
        "width": 795,
        "height": 710,
        "resizing": false,
        "hidden": false
      },
      {
        "id": "wa-1747672160556X-ZayJ5DaicoBkadzHgUG",
        "type": "agent",
        "style": {
          "width": 130
        },
        "position": {
          "x": -240,
          "y": 405
        },
        "measured": {
          "width": 130,
          "height": 120
        },
        "selected": false,
        "dragging": false,
        "className": "",
        "hidden": false
      },
      {
        "id": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "type": "agent",
        "style": {
          "width": 180
        },
        "position": {
          "x": 90,
          "y": 60
        },
        "extent": "parent",
        "measured": {
          "width": 180,
          "height": 120
        },
        "selected": false,
        "dragging": false,
        "className": "",
        "hidden": false,
        "parentId": "wa-1747672141671XNKFFNqEjBZfMyL7K_FUz"
      },
      {
        "id": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "type": "agent",
        "style": {
          "width": 180
        },
        "position": {
          "x": 540,
          "y": 60
        },
        "extent": "parent",
        "measured": {
          "width": 180,
          "height": 120
        },
        "selected": true,
        "dragging": false,
        "className": "",
        "hidden": false,
        "parentId": "wa-1747672141671XNKFFNqEjBZfMyL7K_FUz"
      },
      {
        "id": "1747672281719vu_wTfjf3BRQ_1Vb_88RM",
        "type": "agent",
        "style": {
          "width": 180
        },
        "position": {
          "x": 90,
          "y": 435
        },
        "extent": "parent",
        "measured": {
          "width": 180,
          "height": 174
        },
        "selected": false,
        "dragging": false,
        "className": "",
        "hidden": false,
        "width": 180,
        "height": 174,
        "resizing": false,
        "parentId": "wa-1747672141671XNKFFNqEjBZfMyL7K_FUz"
      },
      {
        "id": "wa-17480674648237IphnhUm7-egrAi3jiepV",
        "type": "agent",
        "style": {
          "width": 180
        },
        "position": {
          "x": 1095,
          "y": 435
        },
        "measured": {
          "width": 180,
          "height": 120
        },
        "selected": false,
        "dragging": false,
        "className": "",
        "hidden": false
      },
      {
        "id": "17480675293561MDjttYRMb6R7tkQEyOZf",
        "type": "agent",
        "style": {
          "width": 180
        },
        "position": {
          "x": 1110,
          "y": 75
        },
        "measured": {
          "width": 180,
          "height": 120
        },
        "selected": false,
        "dragging": false,
        "className": "",
        "hidden": false
      }
    ],
    "edges": [
      {
        "id": "we-1747672163736S1J59BLZY1Tcn27wOE-8X",
        "source": "wa-1747672160556X-ZayJ5DaicoBkadzHgUG",
        "target": "wa-1747672141671XNKFFNqEjBZfMyL7K_FUz",
        "type": "group",
        "hidden": false,
        "animated": false,
        "selected": false,
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#bc76f5",
          "width": 10,
          "height": 10
        },
        "style": {
          "stroke": "#bc76f5",
          "strokeWidth": 1
        },
        "sourceHandle": "agent-handle-right-source-wa-1747672160556X-ZayJ5DaicoBkadzHgUG",
        "targetHandle": "agent-handle-left-target-wa-1747672141671XNKFFNqEjBZfMyL7K_FUz"
      },
      {
        "id": "we-1748066965485BbU1ZzcmBAi8Ocylxokji",
        "source": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "target": "1747672281719vu_wTfjf3BRQ_1Vb_88RM",
        "type": "group",
        "hidden": false,
        "animated": false,
        "selected": false,
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#66bc57",
          "width": 10,
          "height": 10
        },
        "style": {
          "stroke": "#66bc57",
          "strokeWidth": 1
        },
        "sourceHandle": "agent-handle-bottom-source-wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "targetHandle": "agent-handle-top-target-1747672281719vu_wTfjf3BRQ_1Vb_88RM"
      },
      {
        "id": "we-1748066968683b0r9fRebvU4bRF7U0oMh-",
        "source": "1747672281719vu_wTfjf3BRQ_1Vb_88RM",
        "target": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "type": "group",
        "hidden": false,
        "animated": false,
        "selected": false,
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#66bc57",
          "width": 10,
          "height": 10
        },
        "style": {
          "stroke": "#66bc57",
          "strokeWidth": 1
        },
        "sourceHandle": "agent-handle-top-source-1747672281719vu_wTfjf3BRQ_1Vb_88RM",
        "targetHandle": "agent-handle-bottom-target-wa-1747672170039_pXmnMM3Zf8571R3C9KYM"
      },
      {
        "id": "we-17480673303077BWwXXwItEnP4mgM3M0Hd",
        "source": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "target": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "type": "group",
        "hidden": false,
        "animated": false,
        "selected": false,
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#66bc57",
          "width": 10,
          "height": 10
        },
        "style": {
          "stroke": "#66bc57",
          "strokeWidth": 1
        },
        "sourceHandle": "agent-handle-right-source-wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "targetHandle": "agent-handle-left-target-1747672280224yHtHT4KU6hJHXC7NzHnPD"
      },
      {
        "id": "we-1748067370989NrOBDL1uPEYzsRXmETJy7",
        "source": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "target": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "type": "group",
        "hidden": false,
        "animated": false,
        "selected": false,
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#66bc57",
          "width": 10,
          "height": 10
        },
        "style": {
          "stroke": "#66bc57",
          "strokeWidth": 1
        },
        "sourceHandle": "agent-handle-left-source-1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "targetHandle": "agent-handle-right-target-wa-1747672170039_pXmnMM3Zf8571R3C9KYM"
      },
      {
        "id": "we-1748067562820jGS3ON7rSna9NH6bV39xa",
        "source": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "target": "wa-17480674648237IphnhUm7-egrAi3jiepV",
        "type": "group",
        "hidden": false,
        "animated": true,
        "selected": false,
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#66bc57",
          "width": 10,
          "height": 10
        },
        "style": {
          "stroke": "#66bc57",
          "strokeWidth": 1
        },
        "sourceHandle": "agent-handle-right-source-1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "targetHandle": "agent-handle-left-target-wa-17480674648237IphnhUm7-egrAi3jiepV"
      },
      {
        "id": "we-1748067596653CiYJ0k4uxPs7Uu-SK6wiB",
        "source": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "target": "17480675293561MDjttYRMb6R7tkQEyOZf",
        "type": "group",
        "hidden": false,
        "animated": true,
        "selected": false,
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#66bc57",
          "width": 10,
          "height": 10
        },
        "style": {
          "stroke": "#66bc57",
          "strokeWidth": 1
        },
        "sourceHandle": "agent-handle-right-source-1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "targetHandle": "agent-handle-left-target-17480675293561MDjttYRMb6R7tkQEyOZf"
      },
      {
        "id": "we-1748522977306Slsre1g3M3WDTuo_JOeQp",
        "source": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "target": "1747672281719vu_wTfjf3BRQ_1Vb_88RM",
        "type": "group",
        "hidden": false,
        "animated": false,
        "selected": false,
        "markerEnd": {
          "type": "arrowclosed",
          "color": "#66bc57",
          "width": 10,
          "height": 10
        },
        "style": {
          "stroke": "#66bc57",
          "strokeWidth": 1
        },
        "sourceHandle": "agent-handle-bottom-source-1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "targetHandle": "agent-handle-right-target-1747672281719vu_wTfjf3BRQ_1Vb_88RM"
      }
    ],
    "viewport": {
      "x": 183.5,
      "y": 27.5,
      "zoom": 0.5
    },
    "agents": {
      "groupManagerAgents": [
        {
          "type": "agent",
          "name": "Manager",
          "description": "The group manager agent",
          "tags": [],
          "requirements": [],
          "createdAt": "2025-05-19T16:29:01.672Z",
          "updatedAt": "2025-05-19T16:29:01.672Z",
          "data": {
            "systemMessage": null,
            "humanInputMode": "NEVER",
            "codeExecutionConfig": false,
            "agentDefaultAutoReply": null,
            "maxConsecutiveAutoReply": null,
            "termination": {
              "type": "none",
              "keywords": [],
              "criterion": null,
              "methodContent": null
            },
            "modelIds": [
              "wt-1747672095486uUT-F0ZxOpV6OrKqTwToy"
            ],
            "tools": [],
            "nestedChats": [
              {
                "messages": [],
                "triggeredBy": [],
                "condition": {
                  "conditionType": "string_llm",
                  "prompt": ""
                },
                "available": {
                  "type": "none",
                  "value": ""
                }
              }
            ],
            "handoffs": [],
            "contextVariables": {
              "customer_name": "none",
              "logged_in_username": "none",
              "logged_in": "false",
              "requires_login": "true",
              "has_order_id": "false",
              "order_id": "none"
            },
            "updateAgentStateBeforeReply": [],
            "afterWork": null,
            "maxRound": 40,
            "adminName": null,
            "speakers": {
              "selectionMethod": "default",
              "selectionCustomMethod": "",
              "maxRetriesForSelecting": 10,
              "selectionMode": "repeat",
              "allowRepeat": true,
              "allowedOrDisallowedTransitions": {},
              "transitionsType": "allowed",
              "order": []
            },
            "enableClearHistory": false,
            "sendIntroductions": false,
            "initialAgentId": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
            "groupName": "Group"
          },
          "id": "wa-1747672141671XNKFFNqEjBZfMyL7K_FUz",
          "agentType": "group_manager"
        }
      ],
      "userProxyAgents": [
        {
          "type": "agent",
          "name": "Customer",
          "description": "The customer user proxy agent.",
          "tags": [],
          "requirements": [],
          "createdAt": "2025-05-19T16:29:20.556Z",
          "updatedAt": "2025-05-19T16:29:20.556Z",
          "data": {
            "systemMessage": null,
            "humanInputMode": "ALWAYS",
            "codeExecutionConfig": false,
            "agentDefaultAutoReply": null,
            "maxConsecutiveAutoReply": null,
            "termination": {
              "type": "none",
              "keywords": [],
              "criterion": null,
              "methodContent": null
            },
            "modelIds": [],
            "tools": [],
            "nestedChats": [
              {
                "messages": [],
                "triggeredBy": [],
                "condition": {
                  "conditionType": "string_llm",
                  "prompt": ""
                },
                "available": {
                  "type": "none",
                  "value": ""
                }
              }
            ],
            "handoffs": [],
            "contextVariables": {},
            "updateAgentStateBeforeReply": [],
            "afterWork": null
          },
          "id": "wa-1747672160556X-ZayJ5DaicoBkadzHgUG",
          "agentType": "user_proxy"
        }
      ],
      "assistantAgents": [
        {
          "type": "agent",
          "name": "order_triage_agent",
          "description": "Order Triage Agent",
          "tags": [],
          "requirements": [],
          "createdAt": "2025-05-19T16:29:30.039Z",
          "updatedAt": "2025-05-19T16:29:30.039Z",
          "data": {
            "systemMessage": "",
            "humanInputMode": "NEVER",
            "codeExecutionConfig": false,
            "agentDefaultAutoReply": null,
            "maxConsecutiveAutoReply": null,
            "termination": {
              "type": "none",
              "keywords": [],
              "criterion": null,
              "methodContent": null
            },
            "modelIds": [
              "wt-1747672095486uUT-F0ZxOpV6OrKqTwToy"
            ],
            "tools": [],
            "parentId": "wa-1747672141671XNKFFNqEjBZfMyL7K_FUz",
            "nestedChats": [
              {
                "messages": [],
                "triggeredBy": [],
                "condition": {
                  "conditionType": "string_llm",
                  "prompt": ""
                },
                "available": {
                  "type": "none",
                  "value": ""
                }
              }
            ],
            "handoffs": [],
            "contextVariables": {},
            "updateAgentStateBeforeReply": [
              {
                "type": "string",
                "content": "You are an order triage agent, working with a customer and a group of agents to provide support for your e-commerce platform.\n\nAn agent needs to be logged in to be able to access their order. The authentication_agent will work with the customer to verify their identity, transfer to them to start with.\nThe order_mgmt_agent will manage all order related tasks, such as tracking orders, managing orders, etc. Be sure to check the order as one step. Then if it's valid you can record it in the context.\n\nAsk the customer for further information when necessary.\n\nThe current status of this workflow is:\nCustomer name: {customer_name}\nLogged in: {logged_in}\nEnquiring for Order ID: {order_id}"
              }
            ],
            "afterWork": {
              "targetType": "RevertToUserTarget",
              "value": []
            },
            "isMultimodal": false
          },
          "id": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
          "agentType": "assistant"
        },
        {
          "type": "agent",
          "name": "order_mgmt_agent",
          "description": "Order Management Agent",
          "tags": [],
          "requirements": [],
          "createdAt": "2025-05-19T16:29:30.039Z",
          "updatedAt": "2025-05-19T16:29:30.039Z",
          "data": {
            "systemMessage": null,
            "humanInputMode": "NEVER",
            "codeExecutionConfig": false,
            "agentDefaultAutoReply": null,
            "maxConsecutiveAutoReply": null,
            "termination": {
              "type": "none",
              "keywords": [],
              "criterion": null,
              "methodContent": null
            },
            "modelIds": [
              "wt-1747672095486uUT-F0ZxOpV6OrKqTwToy"
            ],
            "tools": [
              {
                "id": "wt-1748065573985IkTZBvXE6SDhmd14Ry0w_",
                "executorId": "1747672280224yHtHT4KU6hJHXC7NzHnPD"
              },
              {
                "id": "wt-1748065131080HvikLOMWz2syY_Wms4rO4",
                "executorId": "1747672280224yHtHT4KU6hJHXC7NzHnPD"
              }
            ],
            "parentId": "wa-1747672141671XNKFFNqEjBZfMyL7K_FUz",
            "nestedChats": [
              {
                "triggeredBy": [
                  "1747672280224yHtHT4KU6hJHXC7NzHnPD"
                ],
                "messages": [
                  {
                    "id": "we-1748067596653CiYJ0k4uxPs7Uu-SK6wiB",
                    "isReply": false
                  },
                  {
                    "id": "we-1748067562820jGS3ON7rSna9NH6bV39xa",
                    "isReply": false
                  }
                ],
                "condition": {
                  "conditionType": "string_llm",
                  "prompt": "Retrieve the status of the order."
                },
                "available": {
                  "type": "string",
                  "value": "has_order_id"
                }
              }
            ],
            "handoffs": [
              "we-1748522977306Slsre1g3M3WDTuo_JOeQp",
              "we-1748067370989NrOBDL1uPEYzsRXmETJy7",
              "nested-chat"
            ],
            "contextVariables": {},
            "updateAgentStateBeforeReply": [
              {
                "type": "string",
                "content": "You are an order management agent that manages inquiries related to e-commerce orders.\n\nThe order must be logged in to access their order.\n\nUse your available tools to get the status of the details from the customer. Ask the customer questions as needed.\n\nUse the check_order_id tool before the record_order_id tool, never together.\n\nThe current status of this workflow is:\nCustomer name: {customer_name}\nLogged in: {logged_in}\nEnquiring for Order ID: {order_id}"
              }
            ],
            "afterWork": {
              "targetType": "RevertToUserTarget",
              "value": []
            },
            "isMultimodal": false
          },
          "id": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
          "agentType": "assistant"
        },
        {
          "type": "agent",
          "name": "authentication_agent",
          "description": "Authentication Agent",
          "tags": [],
          "requirements": [],
          "createdAt": "2025-05-19T16:29:30.039Z",
          "updatedAt": "2025-05-19T16:29:30.039Z",
          "data": {
            "systemMessage": "You are an authentication agent that verifies the identity of the customer.",
            "humanInputMode": "NEVER",
            "codeExecutionConfig": {
              "timeout": 60,
              "workDir": "coding",
              "functions": []
            },
            "agentDefaultAutoReply": null,
            "maxConsecutiveAutoReply": null,
            "termination": {
              "type": "none",
              "keywords": [],
              "criterion": null,
              "methodContent": null
            },
            "modelIds": [
              "wt-1747672095486uUT-F0ZxOpV6OrKqTwToy"
            ],
            "tools": [
              {
                "id": "wt-1748065732418WUL8_FuimG5mx0bk2_jDV",
                "executorId": "1747672281719vu_wTfjf3BRQ_1Vb_88RM"
              }
            ],
            "parentId": "wa-1747672141671XNKFFNqEjBZfMyL7K_FUz",
            "nestedChats": [
              {
                "messages": [],
                "triggeredBy": [],
                "condition": {
                  "conditionType": "string_llm",
                  "prompt": ""
                },
                "available": {
                  "type": "none",
                  "value": ""
                }
              }
            ],
            "handoffs": [],
            "contextVariables": {},
            "updateAgentStateBeforeReply": [],
            "afterWork": {
              "targetType": "RevertToUserTarget",
              "value": []
            },
            "isMultimodal": false
          },
          "id": "1747672281719vu_wTfjf3BRQ_1Vb_88RM",
          "agentType": "assistant"
        },
        {
          "type": "agent",
          "name": "order_summariser_agent",
          "description": "An order summariser agent that provides a summary of the order details.",
          "tags": [],
          "requirements": [],
          "createdAt": "2025-05-24T06:17:44.823Z",
          "updatedAt": "2025-05-24T06:17:44.823Z",
          "data": {
            "systemMessage": "You are an order summariser agent that provides a summary of the order details.",
            "humanInputMode": "NEVER",
            "codeExecutionConfig": false,
            "agentDefaultAutoReply": null,
            "maxConsecutiveAutoReply": null,
            "termination": {
              "type": "none",
              "keywords": [],
              "criterion": null,
              "methodContent": null
            },
            "modelIds": [
              "wt-1747672095486uUT-F0ZxOpV6OrKqTwToy"
            ],
            "tools": [],
            "nestedChats": [
              {
                "messages": [],
                "triggeredBy": [],
                "condition": {
                  "conditionType": "string_llm",
                  "prompt": ""
                },
                "available": {
                  "type": "none",
                  "value": ""
                }
              }
            ],
            "handoffs": [],
            "contextVariables": {},
            "updateAgentStateBeforeReply": [],
            "afterWork": null,
            "isMultimodal": false
          },
          "id": "wa-17480674648237IphnhUm7-egrAi3jiepV",
          "agentType": "assistant"
        },
        {
          "type": "agent",
          "name": "order_retrieval_agent",
          "description": "An order retrieval agent that gets details about an order.",
          "tags": [],
          "requirements": [],
          "createdAt": "2025-05-24T06:17:44.823Z",
          "updatedAt": "2025-05-24T06:17:44.823Z",
          "data": {
            "systemMessage": "You are an order retrieval agent that gets details about an order.",
            "humanInputMode": "NEVER",
            "codeExecutionConfig": false,
            "agentDefaultAutoReply": null,
            "maxConsecutiveAutoReply": null,
            "termination": {
              "type": "none",
              "keywords": [],
              "criterion": null,
              "methodContent": null
            },
            "modelIds": [
              "wt-1747672095486uUT-F0ZxOpV6OrKqTwToy"
            ],
            "tools": [],
            "nestedChats": [
              {
                "messages": [],
                "triggeredBy": [],
                "condition": {
                  "conditionType": "string_llm",
                  "prompt": ""
                },
                "available": {
                  "type": "none",
                  "value": ""
                }
              }
            ],
            "handoffs": [],
            "contextVariables": {},
            "updateAgentStateBeforeReply": [],
            "afterWork": null,
            "isMultimodal": false
          },
          "id": "17480675293561MDjttYRMb6R7tkQEyOZf",
          "agentType": "assistant"
        }
      ],
      "ragUserProxyAgents": [],
      "reasoningAgents": [],
      "captainAgents": [],
      "docAgents": []
    },
    "models": [
      {
        "id": "wt-1747672095486uUT-F0ZxOpV6OrKqTwToy",
        "type": "model",
        "name": "gpt-4.1",
        "description": "A new model",
        "tags": [],
        "requirements": [],
        "createdAt": "2025-05-19T16:28:15.486Z",
        "updatedAt": "2025-06-14T16:36:03.565Z",
        "data": {
          "apiKey": "REPLACE_ME",
          "apiType": "openai",
          "apiVersion": null,
          "baseUrl": null,
          "temperature": null,
          "topP": null,
          "maxTokens": null,
          "aws": {
            "region": "REPLACE_ME",
            "accessKey": "REPLACE_ME",
            "secretKey": "REPLACE_ME",
            "sessionToken": "REPLACE_ME",
            "profileName": "REPLACE_ME"
          },
          "extras": {},
          "defaultHeaders": {},
          "price": {
            "promptPricePer1k": null,
            "completionTokenPricePer1k": null
          }
        }
      }
    ],
    "tools": [
      {
        "id": "wt-1748065085914_4KBVahVhEQ4bRrhAoqRM",
        "type": "tool",
        "name": "databases",
        "description": "The databases",
        "tags": [],
        "requirements": [],
        "createdAt": "2025-05-24T05:38:05.915Z",
        "updatedAt": "2025-05-24T05:38:31.648Z",
        "data": {
          "content": "# Databases\n\nUSER_DATABASE = {\n    \"mark\": {\n        \"full_name\": \"Mark Sze\",\n    },\n    \"kevin\": {\n        \"full_name\": \"Yiran Wu\",\n    },\n}\n\nORDER_DATABASE = {\n    \"TR13845\": {\n        \"user\": \"mark\",\n        \"order_number\": \"TR13845\",\n        \"status\": \"shipped\",  # order status: order_received, shipped, delivered, return_started, returned\n        \"return_status\": \"N/A\",  # return status: N/A, return_started, return_shipped, return_delivered, refund_issued\n        \"product\": \"matress\",\n        \"link\": \"https://www.example.com/TR13845\",\n        \"shipping_address\": \"123 Main St, State College, PA 12345\",\n    },\n    \"TR14234\": {\n        \"user\": \"kevin\",\n        \"order_number\": \"TR14234\",\n        \"status\": \"delivered\",\n        \"return_status\": \"N/A\",\n        \"product\": \"pillow\",\n        \"link\": \"https://www.example.com/TR14234\",\n        \"shipping_address\": \"123 Main St, State College, PA 12345\",\n    },\n    \"TR29384\": {\n        \"user\": \"mark\",\n        \"order_number\": \"TR29384\",\n        \"status\": \"delivered\",\n        \"return_status\": \"N/A\",\n        \"product\": \"bed frame\",\n        \"link\": \"https://www.example.com/TR29384\",\n        \"shipping_address\": \"123 Main St, State College, PA 12345\",\n    },\n}\n",
          "toolType": "shared",
          "secrets": {},
          "kwargs": {}
        }
      },
      {
        "id": "wt-1748065131080HvikLOMWz2syY_Wms4rO4",
        "type": "tool",
        "name": "record_order_id",
        "description": "Record Order Id",
        "tags": [],
        "requirements": [],
        "createdAt": "2025-05-24T05:38:51.080Z",
        "updatedAt": "2025-05-29T12:52:21.439Z",
        "data": {
          "content": "# filename: {new_skill}.py\n\"\"\"Replace this with your code.\n\nmake sure a function with the same name\nas the skill is defined in the code.\n\"\"\"\nfrom autogen.agentchat.group import AgentNameTarget, ContextVariables, ReplyResult\n\ndef record_order_id(order_id: str, context_variables: ContextVariables) -> ReplyResult:\n    \"\"\"Record the order ID in the workflow context\"\"\"\n    target = AgentNameTarget(\"order_triage_agent\")\n    if order_id not in ORDER_DATABASE:\n        return ReplyResult(\n            target=target,\n            context_variables=context_variables,\n            message=f\"Order ID {order_id} not found. Please ask for the correct order ID.\",\n        )\n\n    context_variables[\"order_id\"] = order_id\n    context_variables[\"has_order_id\"] = True\n    return ReplyResult(\n        target=target,\n        context_variables=context_variables,\n        message=f\"Order ID Recorded: {order_id}\",\n    )\n",
          "toolType": "custom",
          "secrets": {},
          "kwargs": {}
        }
      },
      {
        "id": "wt-1748065573985IkTZBvXE6SDhmd14Ry0w_",
        "type": "tool",
        "name": "check_order_id",
        "description": "Check Order Id",
        "tags": [],
        "requirements": [],
        "createdAt": "2025-05-24T05:46:13.985Z",
        "updatedAt": "2025-05-29T12:52:51.306Z",
        "data": {
          "content": "# filename: {new_skill}.py\n\"\"\"Replace this with your code.\n\nmake sure a function with the same name\nas the skill is defined in the code.\n\"\"\"\n\nfrom autogen.agentchat.group import AgentNameTarget, ContextVariables, ReplyResult\n\n\ndef check_order_id(order_id: str, context_variables: ContextVariables) -> ReplyResult:\n    \"\"\"Check if the order ID is valid\"\"\"\n    target=AgentNameTarget(\"order_triage_agent\")\n    # Restricts order to checking to the logged in user\n    if (\n        context_variables[\"logged_in_username\"]\n        and order_id in ORDER_DATABASE\n        and ORDER_DATABASE[order_id][\"user\"] == context_variables[\"logged_in_username\"]\n    ):\n        return ReplyResult(\n            target=target,\n            context_variables=context_variables,\n            message=f\"Order ID {order_id} is valid.\",\n        )\n    return ReplyResult(\n        target=target,\n        context_variables=context_variables,\n        message=f\"Order ID {order_id} is invalid. Please ask for the correct order ID.\",\n    )",
          "toolType": "custom",
          "secrets": {},
          "kwargs": {}
        }
      },
      {
        "id": "wt-1748065732418WUL8_FuimG5mx0bk2_jDV",
        "type": "tool",
        "name": "login_customer_by_username",
        "description": "Login the customer by username",
        "tags": [],
        "requirements": [],
        "createdAt": "2025-05-24T05:48:52.418Z",
        "updatedAt": "2025-05-29T08:38:58.651Z",
        "data": {
          "content": "# filename: {new_skill}.py\n\"\"\"Replace this with your code.\n\nmake sure a function with the same name\nas the skill is defined in the code.\n\"\"\"\nfrom autogen.agentchat.group import AgentNameTarget, ContextVariables, ReplyResult\n\ndef login_customer_by_username(username: str, context_variables: ContextVariables) -> ReplyResult:\n    \"\"\"Get and log the customer in by their username\"\"\"\n    target = AgentNameTarget(\"authentication_agent\")\n    if username in USER_DATABASE:\n        context_variables[\"customer_name\"] = USER_DATABASE[username][\"full_name\"]\n        context_variables[\"logged_in_username\"] = username\n        context_variables[\"logged_in\"] = True\n        context_variables[\"requires_login\"] = False\n        return ReplyResult(\n            context_variables=context_variables,\n            message=f\"Welcome back our customer, {context_variables['customer_name']}! Please continue helping them.\",\n        )\n    return ReplyResult(\n        target=target,\n        context_variables=context_variables,\n        message=f\"User {username} not found. Please ask for the correct username.\",\n    )",
          "toolType": "custom",
          "secrets": {},
          "kwargs": {}
        }
      }
    ],
    "chats": [
      {
        "id": "we-1747672163736S1J59BLZY1Tcn27wOE-8X",
        "type": "group",
        "source": "wa-1747672160556X-ZayJ5DaicoBkadzHgUG",
        "target": "wa-1747672141671XNKFFNqEjBZfMyL7K_FUz",
        "data": {
          "sourceType": "user_proxy",
          "targetType": "group_manager",
          "name": "orderRequest",
          "order": -1,
          "description": "New connection",
          "position": 1,
          "clearHistory": true,
          "maxTurns": null,
          "message": {
            "type": "string",
            "content": "Help me with my order",
            "context": {},
            "useCarryover": false
          },
          "summary": {
            "method": "lastMsg",
            "prompt": "",
            "args": {},
            "content": ""
          },
          "nestedChat": {
            "message": null,
            "reply": null
          },
          "prerequisites": [],
          "condition": {
            "conditionType": "string_llm",
            "prompt": ""
          },
          "available": {
            "type": "none",
            "value": ""
          },
          "afterWork": null,
          "silent": false,
          "realSource": null,
          "realTarget": null
        }
      },
      {
        "id": "we-1748066965485BbU1ZzcmBAi8Ocylxokji",
        "type": "group",
        "source": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "target": "1747672281719vu_wTfjf3BRQ_1Vb_88RM",
        "data": {
          "sourceType": "assistant",
          "targetType": "assistant",
          "name": "NotAuthenticated",
          "order": -1,
          "description": "The customer is not logged in, authenticate the customer.",
          "position": 2,
          "clearHistory": true,
          "maxTurns": null,
          "message": {
            "type": "none",
            "content": null,
            "context": {},
            "useCarryover": false
          },
          "summary": {
            "method": "lastMsg",
            "prompt": "",
            "args": {},
            "content": ""
          },
          "nestedChat": {
            "message": null,
            "reply": null
          },
          "prerequisites": [],
          "condition": {
            "conditionType": "string_llm",
            "prompt": "The customer is not logged in, authenticate the customer."
          },
          "available": {
            "type": "none",
            "value": ""
          },
          "afterWork": null,
          "silent": false,
          "realSource": null,
          "realTarget": null
        }
      },
      {
        "id": "we-1748066968683b0r9fRebvU4bRF7U0oMh-",
        "type": "group",
        "source": "1747672281719vu_wTfjf3BRQ_1Vb_88RM",
        "target": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "data": {
          "sourceType": "assistant",
          "targetType": "assistant",
          "name": "IsAuthenticated",
          "order": -1,
          "description": "The customer is logged in, continue with the order triage.",
          "position": 3,
          "clearHistory": true,
          "maxTurns": null,
          "message": {
            "type": "none",
            "content": null,
            "context": {},
            "useCarryover": false
          },
          "summary": {
            "method": "lastMsg",
            "prompt": "",
            "args": {},
            "content": ""
          },
          "nestedChat": {
            "message": null,
            "reply": null
          },
          "prerequisites": [],
          "condition": {
            "conditionType": "string_context",
            "variable_name": "logged_in"
          },
          "available": {
            "type": "none",
            "value": ""
          },
          "afterWork": null,
          "silent": false,
          "realSource": null,
          "realTarget": null
        }
      },
      {
        "id": "we-17480673303077BWwXXwItEnP4mgM3M0Hd",
        "type": "group",
        "source": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "target": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "data": {
          "sourceType": "assistant",
          "targetType": "assistant",
          "name": "HandleEnquiry",
          "order": -1,
          "description": "The customer is logged in, continue with the order triage.",
          "position": 4,
          "clearHistory": true,
          "maxTurns": null,
          "message": {
            "type": "none",
            "content": null,
            "context": {},
            "useCarryover": false
          },
          "summary": {
            "method": "lastMsg",
            "prompt": "",
            "args": {},
            "content": ""
          },
          "nestedChat": {
            "message": null,
            "reply": null
          },
          "prerequisites": [],
          "condition": {
            "conditionType": "string_llm",
            "prompt": "The customer is logged in, continue with the order mgmt agent."
          },
          "available": {
            "type": "none",
            "value": "!(${has_order_id})"
          },
          "afterWork": null,
          "silent": false,
          "realSource": null,
          "realTarget": null
        }
      },
      {
        "id": "we-1748067370989NrOBDL1uPEYzsRXmETJy7",
        "type": "group",
        "source": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "target": "wa-1747672170039_pXmnMM3Zf8571R3C9KYM",
        "data": {
          "sourceType": "assistant",
          "targetType": "assistant",
          "name": "Done",
          "order": -1,
          "description": "The customer has no more enquiries about this order.",
          "position": 5,
          "clearHistory": true,
          "maxTurns": null,
          "message": {
            "type": "none",
            "content": null,
            "context": {},
            "useCarryover": false
          },
          "summary": {
            "method": "lastMsg",
            "prompt": "",
            "args": {},
            "content": ""
          },
          "nestedChat": {
            "message": null,
            "reply": null
          },
          "prerequisites": [],
          "condition": {
            "conditionType": "string_llm",
            "prompt": "The customer has no more enquiries about this order."
          },
          "available": {
            "type": "none",
            "value": ""
          },
          "afterWork": null,
          "silent": false,
          "realSource": null,
          "realTarget": null
        }
      },
      {
        "id": "we-1748067562820jGS3ON7rSna9NH6bV39xa",
        "type": "group",
        "source": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "target": "wa-17480674648237IphnhUm7-egrAi3jiepV",
        "data": {
          "sourceType": "assistant",
          "targetType": "assistant",
          "name": "GetOrderStatus",
          "order": -1,
          "description": "Check the order details.",
          "position": 6,
          "clearHistory": true,
          "maxTurns": 1,
          "message": {
            "type": "none",
            "content": null,
            "context": {},
            "useCarryover": false
          },
          "summary": {
            "method": "lastMsg",
            "prompt": "",
            "args": {},
            "content": ""
          },
          "nestedChat": {
            "message": {
              "type": "string",
              "useCarryover": false,
              "content": "Summarise the order details provided in a tabulated, text-based, order sheet format.",
              "context": {}
            },
            "reply": null
          },
          "prerequisites": [],
          "condition": {
            "conditionType": "string_llm",
            "prompt": ""
          },
          "available": {
            "type": "none",
            "value": ""
          },
          "afterWork": null,
          "silent": false,
          "realSource": null,
          "realTarget": null
        }
      },
      {
        "id": "we-1748067596653CiYJ0k4uxPs7Uu-SK6wiB",
        "type": "group",
        "source": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "target": "17480675293561MDjttYRMb6R7tkQEyOZf",
        "data": {
          "sourceType": "assistant",
          "targetType": "assistant",
          "name": "GetOrderStatus",
          "order": -1,
          "description": "GetOrderStatus",
          "position": 7,
          "clearHistory": true,
          "maxTurns": 1,
          "message": {
            "type": "none",
            "content": null,
            "context": {},
            "useCarryover": false
          },
          "summary": {
            "method": "lastMsg",
            "prompt": "",
            "args": {},
            "content": ""
          },
          "nestedChat": {
            "message": {
              "type": "method",
              "useCarryover": false,
              "content": "\"\"\"Custom nested chat message function.\"\"\"\n\ndef nested_chat_message(recipient, messages, sender, config):\n    \"\"\"Extract the order summary based on the OrderID in the context variables\"\"\"\n    order_id = sender.context_variables.get(\"order_id\")\n    if order_id and order_id in ORDER_DATABASE:\n        order = ORDER_DATABASE[order_id]\n        address = order[\"shipping_address\"]\n        order_no = order[\"order_number\"]\n        product = order[\"product\"]\n        status = order[\"status\"]\n        return f\"Order {order_no} for {product} is currently {status}. The shipping address is {address}.\"\n    return f\"Order {order_id} not found.\"\n",
              "context": {}
            },
            "reply": null
          },
          "prerequisites": [],
          "condition": {
            "conditionType": "string_llm",
            "prompt": ""
          },
          "available": {
            "type": "none",
            "value": ""
          },
          "afterWork": null,
          "silent": false,
          "realSource": null,
          "realTarget": null
        }
      },
      {
        "id": "we-1748522977306Slsre1g3M3WDTuo_JOeQp",
        "type": "group",
        "source": "1747672280224yHtHT4KU6hJHXC7NzHnPD",
        "target": "1747672281719vu_wTfjf3BRQ_1Vb_88RM",
        "data": {
          "sourceType": "assistant",
          "targetType": "assistant",
          "name": "NotAuthenticated",
          "order": -1,
          "description": "The customer is not logged in, authenticate the customer.",
          "position": 8,
          "clearHistory": true,
          "maxTurns": null,
          "message": {
            "type": "none",
            "content": null,
            "context": {},
            "useCarryover": false
          },
          "summary": {
            "method": "lastMsg",
            "prompt": "",
            "args": {},
            "content": ""
          },
          "nestedChat": {
            "message": null,
            "reply": null
          },
          "prerequisites": [],
          "condition": {
            "conditionType": "string_llm",
            "prompt": "The customer is not logged in, authenticate the customer."
          },
          "available": {
            "type": "expression",
            "value": "!(${logged_in})"
          },
          "afterWork": null,
          "silent": false,
          "realSource": null,
          "realTarget": null
        }
      }
    ],
    "isAsync": false,
    "cacheSeed": null,
    "silent": false
  }
}